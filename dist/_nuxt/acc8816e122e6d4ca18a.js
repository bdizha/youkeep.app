(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{541:function(t,e,n){"use strict";n.r(e);var r={name:"r-account-notifications",props:{maskClosable:{type:Boolean,required:!1,default:!0},closable:{type:Boolean,required:!1,default:!0}},data:function(){return{formNotifications:this.$form.createForm(this,{name:"form_account_notifications"}),isSuccessful:!1,isProcessing:!1,current:"account-notifications",canSendSms:!0,canSendApp:!0,canSendEmail:!0,modal:{isVisible:!1,current:null},message:"Your notification settings have been successfully saved.",user:null,hasError:!1,errors:[]}},mounted:function(){this.user=this.$store.state.user,this.canSendApp=Boolean(this.user.can_send_app),this.canSendSms=Boolean(this.user.can_send_sms),this.canSendEmail=Boolean(this.user.can_send_email)},methods:{onSave:function(t){var e=this;t.preventDefault(),this.hasError=!1,this.isProcessing=!0,this.formNotifications.validateFields((function(t,n){if(t)e.hasError=!0,console.error(t);else{var r={can_send_sms:e.canSendSms,can_send_app:e.canSendApp,can_send_email:e.canSendEmail},o=e;HTTP.post("/account/settings/store",r).then((function(t){if(t.status=null!=t.data.errors){var e=t.data.errors;o.onError(e),setTimeout((function(){o.isProcessing=!1,o.isSuccessful=!1}),3e3)}else o.isSuccessful=!0,setTimeout((function(){o.isProcessing=!1,o.isSuccessful=!1,o.user=t.data.user,o.onUser()}),3e3)})).catch((function(t){o.isProcessing=!1,o.hasError=!0,console.log("Errors",t)}))}}))},onError:function(t){var e=this;this.fields.forEach((function(n){if(null!=t[n]){var r=e.formDetails.getFieldValue(n),o={};o[n]={value:r,errors:[{message:t[n][0],field:n}]},e.formDetails.setFields(o),console.log("what is this :: "+n,t[n][0])}}))},onUser:function(){this.$store.commit("onUser",this.user),this.$router.push(this.redirectTo)},onModal:function(t){this.modal.isVisible=!0,this.modal.current=t,this.$store.dispatch("app/onModal",modal)}}},o=n(13),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("r-account",[n("a-form",{staticClass:"ant-form ant-form-vertical",class:{"r-hidden":t.isProcessing||t.isSuccessful},attrs:{form:t.formNotifications},on:{submit:t.onSave}},[n("a-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("a-col",{staticClass:"gutter-row r-store-page",attrs:{xs:{span:24},sm:{span:24},lg:{span:24}}},[n("a-card",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{title:"MOBILE NUMBER"}},[n("a-row",{attrs:{type:"flex",justify:"center",align:"middle",gutter:[0,12]}},[n("a-col",{attrs:{xs:{span:20},sm:{span:20},lg:{span:20}}},[n("label",{staticClass:"r-heading-light"},[t._v("\n                We use your number to text or call you about your order.\n              ")])]),t._v(" "),n("a-col",{attrs:{xs:{span:4},sm:{span:4},lg:{span:4}}},[n("a-button",{staticClass:"r-btn-bordered-black",attrs:{block:"",size:"small",type:"secondary"},on:{click:function(e){return t.onModal("account-details")}}},[t._v("\n                Change\n              ")])],1)],1)],1)],1)],1),t._v(" "),n("a-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("a-col",{staticClass:"gutter-row r-store-page",attrs:{xs:{span:24},sm:{span:24},lg:{span:24}}},[n("a-card",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{title:"ORDER NOTIFICATIONS"}},[n("a-row",{attrs:{type:"flex",justify:"center",align:"middle",gutter:[0,12]}},[n("a-col",{staticClass:"gutter-row r-text-left",attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:12}}},[n("p",{staticClass:"r-text-normal"},[t._v("\n                Send an SMS message\n              ")])]),t._v(" "),n("a-col",{staticClass:"gutter-row r-text-right",attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:12}}},[n("a-switch",{attrs:{size:"large","default-checked":""},model:{value:t.canSendSms,callback:function(e){t.canSendSms=e},expression:"canSendSms"}})],1)],1),t._v(" "),n("a-row",{attrs:{type:"flex",justify:"center",align:"middle",gutter:[0,12]}},[n("a-col",{staticClass:"gutter-row r-text-left",attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:12}}},[n("p",{staticClass:"r-text-normal"},[t._v("\n                Send app message\n              ")])]),t._v(" "),n("a-col",{staticClass:"gutter-row r-text-right",attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:12}}},[n("a-switch",{attrs:{size:"large","default-checked":""},model:{value:t.canSendApp,callback:function(e){t.canSendApp=e},expression:"canSendApp"}})],1)],1)],1)],1)],1),t._v(" "),n("a-row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("a-col",{staticClass:"gutter-row r-store-page",attrs:{xs:{span:24},sm:{span:24},lg:{span:24}}},[n("a-card",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{title:"EMAIL NOTIFICATIONS"}},[n("a-row",{attrs:{type:"flex",justify:"center",align:"middle",gutter:[0,12]}},[n("a-col",{staticClass:"gutter-row r-text-left",attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:12}}},[n("p",{staticClass:"r-text-normal"},[t._v("\n                Send subscriptions/promotional emails\n              ")])]),t._v(" "),n("a-col",{staticClass:"gutter-row r-text-right",attrs:{xs:{span:24},sm:{span:12},md:{span:12},lg:{span:12}}},[n("a-switch",{attrs:{size:"large","default-checked":""},model:{value:t.canSendEmail,callback:function(e){t.canSendEmail=e},expression:"canSendEmail"}})],1)],1)],1)],1)],1),t._v(" "),n("a-row",{staticClass:"r-mt-24",attrs:{gutter:24,type:"flex",justify:"end"}},[n("a-col",{staticClass:"gutter-row",attrs:{xs:{span:12},sm:{span:12},md:{span:6},lg:{span:6}}}),t._v(" "),n("a-col",{staticClass:"gutter-row",attrs:{xs:{span:12},sm:{span:12},md:{span:6},lg:{span:6}}},[n("a-form-item",{attrs:{"wrapper-col":{span:24}}},[n("a-button",{staticClass:"r-btn-red",attrs:{block:"",size:"large",type:"primary","html-type":"submit"},on:{click:t.onSave}},[t._v("\n            Save\n          ")])],1)],1)],1)],1),t._v(" "),t.isSuccessful?n("div",{staticClass:"r-status-update"},[n("a-icon",{attrs:{type:"check-circle"}}),t._v("Â \n    "+t._s(t.message)+"\n  ")],1):t._e(),t._v(" "),t.isProcessing?n("r-spinner",{attrs:{"is-absolute":!0}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports}}]);
